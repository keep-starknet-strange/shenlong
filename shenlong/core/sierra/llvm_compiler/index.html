<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="LLVM compiler."><meta name="keywords" content="rust, rustlang, rust-lang, llvm_compiler"><title>shenlong::core::sierra::llvm_compiler - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../../../../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../../../../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../../../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../../../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../../shenlong/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../../shenlong/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module llvm_compiler</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../../../index.html">shenlong</a>::<wbr><a href="../../index.html">core</a>::<wbr><a href="../index.html">sierra</a>::<wbr><a class="mod" href="#">llvm_compiler</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="llvm-compiler"><a href="#llvm-compiler">LLVM compiler.</a></h2><h3 id="description"><a href="#description">Description</a></h3>
<p>This module contains the compiler that compiles a Sierra program to LLVM IR.
The compilation can be triggered by calling different functions, depending on the input source.
The input source can be a Sierra program file path, a Sierra program code as a string, or a
Sierra program as a <code>Program</code> object. If the Sierra program is compiled from a file, the file
will be read and the program code will be extracted. The program code will then be parsed into a
<code>Program</code> object. The <code>Program</code> object will then be compiled to LLVM IR and written to a file.
Here are the 3 functions that can be used to trigger the compilation:</p>
<ul>
<li><code>compile_from_file</code>: When the input source is a Sierra program file path.</li>
<li><code>compile_from_code</code>: When the input source is a Sierra program code as a string.</li>
<li><code>compile_sierra_program_to_llvm</code>: When the input source is a Sierra program as a <code>Program</code>
object.</li>
</ul>
<h3 id="compilation-steps"><a href="#compilation-steps">Compilation steps</a></h3>
<p>The compilation process is split into multiple steps.
The steps are executed in the following order:</p>
<ol>
<li>Process the types.</li>
<li>Process the core library functions.</li>
<li>Process the statements.</li>
<li>Finalize the compilation.</li>
</ol>
<h3 id="state-machine"><a href="#state-machine">State machine</a></h3>
<p>The compiler is implemented as a state machine.
The state machine is implemented using a <code>HashMap</code> that maps a <code>CompilationStateTransition</code> to a
<code>bool</code>. The <code>CompilationStateTransition</code> is a tuple of two <code>CompilationState</code>s.
The first state is the current state.
The second state is the next state.
The <code>bool</code> indicates whether the transition is valid.
The state machine is initialized with all valid transitions.
The state machine is updated after each compilation step.
The state machine is used to ensure that the compilation steps are executed in the correct
order. The state machine is also used to ensure that the compilation steps are executed only
once.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Compiler.html" title="shenlong::core::sierra::llvm_compiler::Compiler struct">Compiler</a></div><div class="item-right docblock-short">Compiler is the main entry point for the LLVM backend.
It is responsible for compiling a Sierra program to LLVM IR.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CompilationState.html" title="shenlong::core::sierra::llvm_compiler::CompilationState enum">CompilationState</a></div><div class="item-right docblock-short">Compilation state.
This is used to keep track of the current compilation state.
The reason is that the compilation process is split into multiple steps.
The state will be used to implement a state machine that will keep track of the current
compilation step. Goal is to ensure consistency in the order of the compilation steps.
This is important because the compilation steps are not independent.
For example, the type declarations must be processed before the statements.
The state machine will ensure that the compilation steps are executed in the correct order.
The state machine will also ensure that the compilation steps are executed only once.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.CompilationStateTransition.html" title="shenlong::core::sierra::llvm_compiler::CompilationStateTransition type">CompilationStateTransition</a></div><div class="item-right docblock-short">A compilation state transition.
This is a tuple of two compilation states.
The first state is the current state.
The second state is the next state.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="shenlong" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.1 (d5a82bbd2 2023-02-07)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>